<footer class="footer" [class.collapsed]="isCollapsed">
  <button class="legend-toggle" [class.collapsed]="isCollapsed" (click)="toggleLegend()">
    Legend
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="18 15 12 9 6 15"></polyline>
    </svg>
  </button>
      
  <div class="legend-container" *ngIf="!isCollapsed">
    <div class="legend-group">
      <h4>Site Classification</h4>
      <div class="legend-items">
        <div class="legend-item">
          <div class="legend-icon confirmed">
            <img src="assets/images/map/star.svg" alt="Confirmed Site Icon">
          </div>
          <div class="legend-label">
            <span class="label-text">Heritage Sites</span>
            <span class="probability high">{{ siteCounts.heritage }}</span>
          </div>
        </div>

        <div class="legend-item">
          <div class="legend-icon potential">
            <img src="assets/images/map/point_amarillo.svg" alt="Archaios Site Icon" width="24" height="24">
          </div>
          <div class="legend-label">
            <span class="label-text">Archaios Sites</span>
            <span class="probability medium">{{ siteCounts.archaios }}</span>
          </div>
        </div>

        <div class="legend-item">
          <div class="legend-icon investigation">
           <img src="assets/images/map/point_rojo.svg" alt="Under Investigation Icon" width="24" height="24">
          </div>
          <div class="legend-label">
            <span class="label-text">Potential Sites</span>
            <span class="probability low">{{ siteCounts.potential }}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="legend-group">
      <h4>Site Data</h4>
      <div class="legend-items">
        <div class="legend-item">
          <div class="legend-icon settlement">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M2 20h20M4 20V4h16v16"/>
              <path d="M4 8h16M12 4v4M8.5 20v-4h7v4"/>
            </svg>
          </div>
          <div class="legend-label">
            <span class="label-text">Total Size</span>
            <span class="count">{{ siteCounts.totalFileSize }}</span>
          </div>
        </div>

        <div class="legend-item">
          <div class="legend-icon ritual">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M2 12h20M12 2v20"/>
              <path d="M9 4h6M8 8h8M9 12h6M8 16h8M9 20h6"/>
            </svg>
          </div>
          <div class="legend-label">
            <span class="label-text">Total Uploads</span>
            <span class="count">{{ siteCounts.totalUploads }}</span>
          </div>
        </div>

        <div class="legend-item">
          <div class="legend-icon artifacts">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
              <circle cx="9" cy="7" r="4"/>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
          </div>
          <div class="legend-label">
            <span class="label-text">Total Users</span>
            <span class="count">{{ siteCounts.totalUsers }}</span>
          </div>
        </div>
      </div>
    </div>
  <div class="legend-group">
      <h4>My Uploads</h4>
      <div class="legend-items">
        <div class="legend-item">
          <div class="legend-icon settlement">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
              <path d="M3.27 6.96L12 12.01l8.73-5.05"/>
              <path d="M12 22.08V12"/>
            </svg>
          </div>
          <div class="legend-label">
            <span class="label-text">Total Size</span>
            <span class="count">{{ siteCounts.myFileSize }}</span>
          </div>
        </div>
        
        <div class="legend-item">
          <div class="legend-icon settlement">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="17 8 12 3 7 8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
          </div>
          <div class="legend-label">
            <span class="label-text">Total Uploads</span>
            <span class="count">{{ siteCounts.myuploads }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>